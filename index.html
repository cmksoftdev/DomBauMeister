<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Title</title>
</head>

<body>
    <p id="app"></p>
    <script src="javascript/library.js"></script>
    <script>

        // Create array of elements
        const elements = [
            {
                type: "div",
                style: "position:fixed;width:100%;height:100%;",
                content: [
                    {
                        type: "div",
                        content: [
                            {
                                type: "h1",
                                content: "Uberschrift",
                                id: "u"
                            }],
                        id: "uc"
                    },
                    {
                        type: "div",
                        content: [
                            {
                                type: "div",
                                content: "test2",
                                style: "color:blue;"
                            },
                            {
                                type: "div",
                                content: "test2"
                            },
                        ],
                        id: "test1"
                    },
                    {
                        type: "div",
                        content: "test2",
                        id: "test2"
                    },
                    {
                        type: "div",
                        content: "test3",
                        id: "test3"
                    },
                    {
                        type: "div",
                        content: "test4",
                        id: "test4"
                    },
                ],
                id: "main"
            },

        ];
        const position = new Property(false);
        const positionOfU = new Property("", (p) => setElementXY("uc", p.x, p.y));
        const isDown = new Property(false);

        // Create ActionManager
        const actionManager = new ActionManager();

        // Create DOM from array and render
        const dom = createDOM(elements);
        function render() {
            renderDOM("app", dom, [
                () => {
                    addMouseMoveEvent("main", (event) => {
                        event.preventDefault();
                        actionManager.callAction("mousemove", event);
                    });
                    addMouseDownEvent("main", (event) => {
                        event.preventDefault();
                        actionManager.callAction("mousedown", event);
                    });
                    addMouseUpEvent("main", (event) => {
                        event.preventDefault();
                        actionManager.callAction("mouseup", event);
                    });
                }]);
        }
        render();

        // Add action and functions to invoke
        actionManager.addAction("mousemove", [
            (event) => {
                if (isDown.get()) {
                    let posi = getMousePosition(event);
                    posi = { x: posi.x - 30, y: posi.y - 30 }
                    positionOfU.set(posi);
                }
            },
        ]);
        actionManager.addAction("mousedown", [
            () => { isDown.set(true); },
        ]);
        actionManager.addAction("mouseup", [
            () => { isDown.set(false); },
        ]);

        const valid = parameterValidator(["1", "3", "c"]);
        const invalid1 = parameterValidator(["1", "3", null]);
        const invalid2 = parameterValidator([undefined, "3", "c"]);
    </script>
</body>
</html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>DomBauMeister.js Test</title>
</head>

<body bgcolor="#00BFFF">
    <p id="app"></p>
    <script src="javascript/library.js"></script>
    <script src="javascript/viewtemplates.js"></script>
    <script>

        // Initialize framework
        const dbm = new DomBauMeister({
            rootElement: "app",
            renderOnEventChange: "",
            renderOnModelChange: ""
        });

        // Create view
        const windowtest = getWindowView(
            "app",
            "window1",
            100,
            120,
            "Help", [{
                type: "label",
                style: "height:100px;width:100px;",
                content: "This is the help window."
            }, {
                type: "img",
                style: "position: relative;height:40%;width:40%;margin:auto;",
                extend: {
                    src: "https://upload.wikimedia.org/wikipedia/commons/d/d9/Icon-round-Question_mark.svg"
                }
            }], "---");
        const windowtest2 = getWindowView(
            "app",
            "window2",
            300,
            100,
            "Settings",
            "<canvas id=\"canvas\"/>",
            "---");
        const windoweditor = getWindowView(
            "app",
            "windoweditor",
            300,
            100,
            "Editor", [{
                type: "textarea",
                style: "pointer-events: all;"
            }],
            "---");
        const windowlogger = getWindowView(
            "app4",
            "windowlogger",
            300,
            100,
            "Logger",
            [{
                type: "form",
                style: "height:100px;width:100px;",
                content: [{
                    type: "input",
                    id: "user",
                    extend: {
                        type: "text",
                        maxlength: "30"
                    },
                    style: "height:23px;width:100%;pointer-events: all;margin:15px;",
                }, {
                    type: "input",
                    id: "password",
                    extend: {
                        type: "password",
                        maxlength: "30"
                    },
                    content: "Password",
                    style: "height:23px;width:100%;pointer-events: all;",
                }]
            }],
            "---");

        const icon1 = getIconView(
            "icon1",
            "https://upload.wikimedia.org/wikipedia/commons/8/8e/Icon_tools.svg",
            "icon1",
            50,
            150,
            "Settings",
            "window2_show");
        const icon2 = getIconView(
            "icon2",
            "https://upload.wikimedia.org/wikipedia/commons/d/d9/Icon-round-Question_mark.svg",
            "icon2",
            50,
            50,
            "Help",
            "window1_show");
        const icon3 = getIconView(
            "icon3",
            "https://upload.wikimedia.org/wikipedia/commons/f/f0/Icon-notepad.svg",
            "icon3",
            50,
            250,
            "Editor",
            "windoweditor_show");
        const icon4 = getIconView(
            "icon4",
            "https://upload.wikimedia.org/wikipedia/commons/c/c4/OOjs_UI_icon_article-ltr.svg",
            "icon4",
            50,
            350,
            "Logger",
            "windowlogger_show");

        // Add views to framework
        dbm.addViews([windowtest, windowtest2, windoweditor, windowlogger, icon1, icon2, icon3, icon4]);

        // Add timer to settings window
        dbm.addActions([{
            actionName: "timer",
            listeners: [() => {
                var currentdate = new Date();
                var datetime = "Time: "
                    + currentdate.getHours() + ":"
                    + currentdate.getMinutes() + ":"
                    + currentdate.getSeconds();
                dbm.injectModel("window2", {
                    content: datetime
                });
            }],
            interval: 1000,
        }]);
        dbm.facilitymanager.actionManager.addListener("window2_show", () => {
            dbm.call("timer");
        });
        dbm.facilitymanager.actionManager.addListener("window2_hide", () => {
            dbm.facilitymanager.actionManager.cancelRepeatingAction("timer");
        });

        // Start framework
        dbm.start();

    </script>
</body>
</html>